// All g12b devices should base on either coreelec_g12b.dtsi or coreelec_g12b_a.dtsi
#include "coreelec_g12b.dtsi"
// OGU specific: Power Management Integrated Controller
#include "meson64_gou_pmic.dtsi"
// OGU specific: LCD panel
#include "meson64_gou_panel.dtsi"
// OGU specific: GPIO Joypad
#include "meson64_gou_joypad.dtsi"

/ {
    model = "Hardkernel ODROID-GOU";
    coreelec-dt-id = "g12b_s922x_odroid_go_ultra"; // Yeah we will still use coreelec-dt-id, never re-invent the wheel huh?
    amlogic-dt-id = "g12b_ogu";

    /delete-node/ memory@00000000; // Different from N2, we use that, since it's already 2G
	/delete-node/ bt-dev; // No BT or Wi-Fi included
	/delete-node/ wifi;
	/delete-node/ wifi_pwm_conf;
	/delete-node/ adc_keypad;
	/delete-node/ unifykey;
	// /delete-node/ rtc;
    /delete-node/ videosync;
    /delete-node/ dummy_venc;
    /delete-node/ video_composer;
    /delete-node/ meson_uvm;
    /delete-node/ vcodec_dec;
    /delete-node/ jpegenc;
    /delete-node/ gpioleds;
    /delete-node/ cvbsout;
    /delete-node/ linux,picdec;
    /delete-node/ picdec;
    /delete-node/ multi-di;

    vout {
        /delete-property/ fr_policy;
    };

    vout2 { // This is not a label, so it can't be simply disabled at the end
        /delete-property/ fr_policy;
        status = "disabled";
        clocks = <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 64)>,
                <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 69)>;
    };

    ge2d {
        clocks = <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 17)>,
                <&clkc ((33 + 22) + 6)>,
                <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 18)>;
    };

    gpiomem {
		compatible = "amlogic, gpiomem";
		reg = <0x0 0xff634000 0x0 0x1000>,	/* GPIO banks */
			<0x0 0xff800000 0x0 0x1000>;	/* GPIO_AO bank */
		status = "okay";
	};

	reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;
        /delete-node/ linux,ion-fb;
        /delete-node/ linux,vdin1_cma;
        /delete-node/ linux,galcore;
        /delete-node/ linux,isp_cma;
        /delete-node/ linux,adapt_cma;
        /delete-node/ linux,vdin0_cma;

		/* global autoconfigured region for contiguous allocations */
		ramoops@0x07400000 {
			compatible = "ramoops";
			reg = <0x0 0x07400000 0x0 0x00100000>;
			record-size = <0x8000>;
			console-size = <0x8000>;
			ftrace-size = <0x40000>;
            /delete-property/ pmsg-size;
		};

		secmon_reserved:linux,secmon {
			compatible = "shared-dma-pool";
			reusable;
			size = <0x0 0x400000>;
			alignment = <0x0 0x400000>;
			alloc-ranges = <0x0 0x05000000 0x0 0x400000>;
			clear-map;
		};

		secos_reserved:linux,secos {
			status = "disable";
			compatible = "amlogic, aml_secos_memory";
			reg = <0x0 0x05300000 0x0 0x2000000>;
			no-map;
		};
		logo_reserved:linux,meson-fb {
			compatible = "shared-dma-pool";
			reusable;
			size = <0x0 0x800000>;
			alignment = <0x0 0x400000>;
			alloc-ranges = <0x0 0x3d800000 0x0 0x800000>;
		};
		ion_cma_reserved:linux,ion-dev {
			compatible = "shared-dma-pool";
			reusable;
			size = <0x0 0x8000000>;
			alignment = <0x0 0x400000>;
		};

		/*di CMA pool */
		di_cma_reserved:linux,di_cma {
			compatible = "shared-dma-pool";
			reusable;
			/* buffer_size = 3621952(yuv422 8bit)
			 *  | 4736064(yuv422 10bit)
			 *  | 4074560(yuv422 10bit full pack mode)
			 * 10x3621952=34.6M(0x23) support 8bit
			 * 10x4736064=45.2M(0x2e) support 12bit
			 * 10x4074560=40M(0x28) support 10bit
			 */
			size = <0x0 0x02800000>;
			alignment = <0x0 0x400000>;
		};
		/*  POST PROCESS MANAGER */
		ppmgr_reserved:linux,ppmgr {
			compatible = "shared-dma-pool";
			size = <0x0 0x0>;
		};

		codec_mm_cma:linux,codec_mm_cma {
			compatible = "shared-dma-pool";
			reusable;
			/* ion_codec_mm max can alloc size 80M*/
			size = <0x0 0x13400000>;
			alignment = <0x0 0x400000>;
			linux,contiguous-region;
			clear-map;
		};
		/* codec shared reserved */
		codec_mm_reserved:linux,codec_mm_reserved {
			compatible = "amlogic, codec-mm-reserved";
			size = <0x0 0x0>;
			alignment = <0x0 0x100000>;
			//no-map;
		};
	};

	codec_mm {
		compatible = "amlogic, codec, mm";
		memory-region = <&codec_mm_cma &codec_mm_reserved>;
		dev_name = "codec_mm";
		status = "okay";
	};

	ppmgr {
		compatible = "amlogic, ppmgr";
		memory-region = <&ppmgr_reserved>;
		dev_name = "ppmgr";
		status = "okay";
	};

	deinterlace {
		compatible = "amlogic, deinterlace";
		status = "okay";
		/* 0:use reserved; 1:use cma; 2:use cma as reserved */
		flag_cma = <1>;
		memory-region = <&di_cma_reserved>;
		interrupts = <0 46 1
				0 40 1>;
		interrupt-names = "pre_irq", "post_irq";
        clocks = <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 23)>,
                <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 24)>;
		clock-names = "vpu_clkb_tmp_composite",
			"vpu_clkb_composite";
		clock-range = <334 667>;
		/* buffer-size = <3621952>;(yuv422 8bit) */
		buffer-size = <4074560>;/*yuv422 fullpack*/
		/* reserve-iomap = "true"; */
		/* if enable nr10bit, set nr10bit-support to 1 */
		post-wr-support = <1>;
		nr10bit-support = <1>;
		nrds-enable = <1>;
		pps-enable = <1>;
	};

	ionvideo {
		compatible = "amlogic, ionvideo";
		dev_name = "ionvideo";
		status = "okay";
	};

	efuse: efuse{
		compatible = "amlogic, efuse";
		read_cmd = <0x82000030>;
		write_cmd = <0x82000031>;
		get_max_cmd = <0x82000033>;
		key = <&efusekey>;
		clocks = <&clkc CLKID_EFUSE>;
		clock-names = "efuse_clk";
		status = "okay";
	};

	efusekey:efusekey{
		keynum = <1>;
		key0 = <&key_0>;
        /delete-property/ key1;
        /delete-property/ key2;
        /delete-property/ key3;
        /delete-node/ key_1;
        /delete-node/ key_2;
        /delete-node/ key_3;

		key_0: key_0 {
			keyname = "uuid";
			offset = <0>;
			size = <32>;
		};
	};//End efusekey

	amlvecm {
		compatible = "amlogic, vecm";
		dev_name = "aml_vecm";
		status = "okay";
		gamma_en = <0>;/*1:enabel ;0:disable*/
		wb_en = <0>;/*1:enabel ;0:disable*/
		cm_en = <0>;/*1:enabel ;0:disable*/
	};
	amdolby_vision {
		compatible = "amlogic, dolby_vision_g12a";
		dev_name = "aml_amdolby_vision_driver";
		status = "okay";
		tv_mode = <0>;/*1:enabel ;0:disable*/
	};

	/* Audio Related start */
	dummy_codec:dummy{
		#sound-dai-cells = <0>;
		compatible = "amlogic, aml_dummy_codec";
		status = "okay";
	};
	amlogic_codec:t9015{
		#sound-dai-cells = <0>;
		compatible = "amlogic, aml_codec_T9015";
		reg = <0x0 0xFF632000 0x0 0x2000>;
		is_auge_used = <1>; /* meson or auge chipset used */
		tdmout_index = <1>;
		status = "okay";
	};
	audio_effect:eqdrc{
		/*eq_enable = <1>;*/
		/*drc_enable = <1>;*/
		/*
		 * 0:tdmout_a
		 * 1:tdmout_b
		 * 2:tdmout_c
		 * 3:spdifout
		 * 4:spdifout_b
		 */
		eqdrc_module = <1>;
		/* max 0xf, each bit for one lane, usually one lane */
		lane_mask = <0x1>;
		/* max 0xff, each bit for one channel */
		channel_mask = <0x3>;
	};
	auge_sound {

		compatible = "amlogic, g12a-sound-card";
		aml-audio-card,name = "AML-AUGESOUND";
		aml-audio-card,effect = <&audio_effect>;
		aml-audio-card,hp-det-gpio = <&gpio_ao GPIOAO_9 GPIO_ACTIVE_LOW>;

        /delete-property/ avout_mute-gpios;
        /delete-node/ aml-audio-card,dai-link@1;
        /delete-node/ aml-audio-card,dai-link@2;
        /delete-node/ aml-audio-card,dai-link@3;
		aml-audio-card,dai-link@0 {
			format = "i2s";
			mclk-fs = <256>;
			bitclock-master = <&aml_tdmb>;
			frame-master = <&aml_tdmb>;
			continuous-clock;
            /delete-property/ bitclock-master;
			/delete-property/ frame-master;

			cpu {
				sound-dai = <&aml_tdmb>;
				dai-tdm-slot-tx-mask = <1 1>;
				dai-tdm-slot-rx-mask = <1 1>;
				dai-tdm-slot-num = <2>;
				dai-tdm-slot-width = <32>;
				system-clock-frequency = <12288000>;
			};
			codec {
				sound-dai = <&rk817_codec>;
			};
		};
	};
	audiolocker: locker {
		compatible = "amlogic, audiolocker";
		clocks = <&clkaudio CLKID_AUDIO_LOCKER_OUT
				&clkaudio CLKID_AUDIO_LOCKER_IN
				&clkaudio CLKID_AUDIO_MCLK_D
				&clkaudio CLKID_AUDIO_MCLK_E
				&clkc CLKID_MPLL1
				&clkc CLKID_MPLL2>;
		clock-names = "lock_out", "lock_in", "out_src",
					"in_src", "out_calc", "in_ref";
		interrupts = <GIC_SPI 1 IRQ_TYPE_EDGE_RISING>;
		interrupt-names = "irq";
		frequency = <49000000>; /* pll */
		dividor = <49>; /* locker's parent */
		status = "okay";
	};
	/* Audio Related end */

	cpu_opp_table0: cpu_opp_table0 {
		compatible = "operating-points-v2";
		opp-shared;

		opp00 {
			opp-hz = /bits/ 64 <500000000>;
			opp-microvolt = <730000>;
		};
		opp01 {
			opp-hz = /bits/ 64 <667000000>;
			opp-microvolt = <730000>;
		};
		opp02 {
			opp-hz = /bits/ 64 <1000000000>;
			opp-microvolt = <760000>;
		};
		opp03 {
			opp-hz = /bits/ 64 <1200000000>;
			opp-microvolt = <780000>;
		};
		opp04 {
			opp-hz = /bits/ 64 <1398000000>;
			opp-microvolt = <810000>;
		};
		opp05 {
			opp-hz = /bits/ 64 <1512000000>;
			opp-microvolt = <860000>;
		};
		opp06 {
			opp-hz = /bits/ 64 <1608000000>;
			opp-microvolt = <900000>;
		};
		opp07 {
			opp-hz = /bits/ 64 <1704000000>;
			opp-microvolt = <960000>;
		};
		opp08 {
			opp-hz = /bits/ 64 <1800000000>;
			opp-microvolt = <1020000>;
		};
		opp09 {
			opp-hz = /bits/ 64 <1908000000>;
			opp-microvolt = <1030000>;
		};
		opp10 {
			opp-hz = /bits/ 64 <2016000000>;
			opp-microvolt = <1040000>;
		};
	};

	cpu_opp_table1: cpu_opp_table1 {
		compatible = "operating-points-v2";
		opp-shared;

		opp00 {
			opp-hz = /bits/ 64 <500000000>;
			opp-microvolt = <730000>;
		};
		opp01 {
			opp-hz = /bits/ 64 <667000000>;
			opp-microvolt = <730000>;
		};
		opp02 {
			opp-hz = /bits/ 64 <1000000000>;
			opp-microvolt = <730000>;
		};
		opp03 {
			opp-hz = /bits/ 64 <1200000000>;
			opp-microvolt = <750000>;
		};
		opp04 {
			opp-hz = /bits/ 64 <1398000000>;
			opp-microvolt = <770000>;
		};
		opp05 {
			opp-hz = /bits/ 64 <1512000000>;
			opp-microvolt = <770000>;
		};
		opp06 {
			opp-hz = /bits/ 64 <1608000000>;
			opp-microvolt = <780000>;
		};
		opp07 {
			opp-hz = /bits/ 64 <1704000000>;
			opp-microvolt = <790000>;
		};
		opp08 {
			opp-hz = /bits/ 64 <1800000000>;
			opp-microvolt = <830000>;
		};
		opp09 {
			opp-hz = /bits/ 64 <1908000000>;
			opp-microvolt = <860000>;
		};
		opp10 {
			opp-hz = /bits/ 64 <2016000000>;
			opp-microvolt = <910000>;
		};
		opp11 {
			opp-hz = /bits/ 64 <2100000000>;
			opp-microvolt = <960000>;
		};
		opp12 {
			opp-hz = /bits/ 64 <2208000000>;
			opp-microvolt = <1030000>;
		};
		opp13 {
			opp-hz = /bits/ 64 <2304000000>;
			opp-microvolt = <1030000>;
		};
		opp14 {
			opp-hz = /bits/ 64 <2400000000>;
			opp-microvolt = <1040000>;
		};
	};

	cpufreq-meson {
		compatible = "amlogic, cpufreq-meson";
		status = "okay";
	};

	gpio_keypad {
		compatible = "amlogic, gpio_keypad";
		status = "disabled";
		scan_period = <20>;
		key_num = <1>;
		key_name = "power";
		key_code = <116>;
		/delete-property/ key-gpios;
		/delete-property/ detect_mode;
		/delete-property/ reg;
	};

	leds {
		compatible = "gpio-leds";
		status = "okay";
		sys_led {
			label="sys_led";
			gpios=<&gpio_ao GPIOAO_11 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "heartbeat";
		};
	};

    vpu {
        clocks =    <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 17)>,
                    <&clkc (((33 + 22) + 13) + 8)>,
                    <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 3)>,
                    <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 7)>,
                    <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 8)>;
    };

    soc {
        ion_dev {
            memory-region = <&ion_cma_reserved>;
        };
    };

    remote:rc@0xff808040 {
        compatible = "amlogic, aml_remote";
        dev_name = "meson-remote";
        reg = <0x0 0xff808040 0x00 0x44>,
        <0x0 0xff808000 0x00 0x20>;
        status = "okay";
        protocol = <0x01>;
        interrupts = <0 196 1>;
        pinctrl-names = "default";
        pinctrl-0 = <&remote_pins>;
        map = <&custom_maps>;
        max_frame_time = <200>;
    };

    custom_maps:custom_maps {
        mapnum = <3>;
        map0 = <&map_0>;
        map1 = <&map_1>;
        map2 = <&map_2>;
        map_0: map_0{
            mapname = "amlogic-remote-1";
            customcode = <0xfb04>;
            release_delay = <80>;
            size = <50>;
            keymap = <((((0x47) & 0xFFFF)<<16) | ((11) & 0xFFFF))
                ((((0x13) & 0xFFFF)<<16) | ((2) & 0xFFFF))
                ((((0x10) & 0xFFFF)<<16) | ((3) & 0xFFFF))
                ((((0x11) & 0xFFFF)<<16) | ((4) & 0xFFFF))
                ((((0x0F) & 0xFFFF)<<16) | ((5) & 0xFFFF))
                ((((0x0C) & 0xFFFF)<<16) | ((6) & 0xFFFF))
                ((((0x0D) & 0xFFFF)<<16) | ((7) & 0xFFFF))
                ((((0x0B) & 0xFFFF)<<16) | ((8) & 0xFFFF))
                ((((0x08) & 0xFFFF)<<16) | ((9) & 0xFFFF))
                ((((0x09) & 0xFFFF)<<16) | ((10) & 0xFFFF))
                ((((0x5C) & 0xFFFF)<<16) | ((97) & 0xFFFF))
                ((((0x51) & 0xFFFF)<<16) | ((61) & 0xFFFF))
                ((((0x50) & 0xFFFF)<<16) | ((62) & 0xFFFF))
                ((((0x40) & 0xFFFF)<<16) | ((63) & 0xFFFF))
                ((((0x4d) & 0xFFFF)<<16) | ((64) & 0xFFFF))
                ((((0x43) & 0xFFFF)<<16) | ((65) & 0xFFFF))
                ((((0x17) & 0xFFFF)<<16) | ((66) & 0xFFFF))
                ((((0x00) & 0xFFFF)<<16) | ((67) & 0xFFFF))
                ((((0x01) & 0xFFFF)<<16) | ((68) & 0xFFFF))
                ((((0x16) & 0xFFFF)<<16) | ((87) & 0xFFFF))
                ((((0x49) & 0xFFFF)<<16) | ((14) & 0xFFFF))
                ((((0x06) & 0xFFFF)<<16) | ((130) & 0xFFFF))
                ((((0x14) & 0xFFFF)<<16) | ((131) & 0xFFFF))
                ((((0x44) & 0xFFFF)<<16) | ((103) & 0xFFFF))
                ((((0x1D) & 0xFFFF)<<16) | ((108) & 0xFFFF))
                ((((0x1C) & 0xFFFF)<<16) | ((105) & 0xFFFF))
                ((((0x48) & 0xFFFF)<<16) | ((106) & 0xFFFF))
                ((((0x53) & 0xFFFF)<<16) | ((125) & 0xFFFF))
                ((((0x45) & 0xFFFF)<<16) | ((104) & 0xFFFF))
                ((((0x19) & 0xFFFF)<<16) | ((109) & 0xFFFF))
                ((((0x52) & 0xFFFF)<<16) | ((119) & 0xFFFF))
                ((((0x05) & 0xFFFF)<<16) | ((122) & 0xFFFF))
                ((((0x59) & 0xFFFF)<<16) | ((123) & 0xFFFF))
                ((((0x1b) & 0xFFFF)<<16) | ((120) & 0xFFFF))
                ((((0x04) & 0xFFFF)<<16) | ((121) & 0xFFFF))
                ((((0x1A) & 0xFFFF)<<16) | ((116) & 0xFFFF))
                ((((0x0A) & 0xFFFF)<<16) | ((15) & 0xFFFF))
                ((((0x0e) & 0xFFFF)<<16) | ((113) & 0xFFFF))
                ((((0x1F) & 0xFFFF)<<16) | ((102) & 0xFFFF))
                ((((0x1e) & 0xFFFF)<<16) | ((132) & 0xFFFF))
                ((((0x07) & 0xFFFF)<<16) | ((133) & 0xFFFF))
                ((((0x12) & 0xFFFF)<<16) | ((134) & 0xFFFF))
                ((((0x54) & 0xFFFF)<<16) | ((135) & 0xFFFF))
                ((((0x02) & 0xFFFF)<<16) | ((136) & 0xFFFF))
                ((((0x4f) & 0xFFFF)<<16) | ((30) & 0xFFFF))
                ((((0x42) & 0xFFFF)<<16) | ((48) & 0xFFFF))
                ((((0x5d) & 0xFFFF)<<16) | ((46) & 0xFFFF))
                ((((0x4c) & 0xFFFF)<<16) | ((32) & 0xFFFF))
                ((((0x58) & 0xFFFF)<<16) | ((137) & 0xFFFF))
                ((((0x55) & 0xFFFF)<<16) | ((140) & 0xFFFF))>;
        };
        map_1: map_1{
            mapname = "amlogic-remote-2";
            customcode = <0xfe01>;
            release_delay = <80>;
            size = <53>;
            keymap = <((((0x01) & 0xFFFF)<<16) | ((2) & 0xFFFF))
                ((((0x02) & 0xFFFF)<<16) | ((3) & 0xFFFF))
                ((((0x03) & 0xFFFF)<<16) | ((4) & 0xFFFF))
                ((((0x04) & 0xFFFF)<<16) | ((5) & 0xFFFF))
                ((((0x05) & 0xFFFF)<<16) | ((6) & 0xFFFF))
                ((((0x06) & 0xFFFF)<<16) | ((7) & 0xFFFF))
                ((((0x07) & 0xFFFF)<<16) | ((8) & 0xFFFF))
                ((((0x08) & 0xFFFF)<<16) | ((9) & 0xFFFF))
                ((((0x09) & 0xFFFF)<<16) | ((10) & 0xFFFF))
                ((((0x0a) & 0xFFFF)<<16) | ((11) & 0xFFFF))
                ((((0x1F) & 0xFFFF)<<16) | ((0x1d2) & 0xFFFF))
                ((((0x15) & 0xFFFF)<<16) | ((139) & 0xFFFF))
                ((((0x16) & 0xFFFF)<<16) | ((15) & 0xFFFF))
                ((((0x0c) & 0xFFFF)<<16) | ((0x192) & 0xFFFF))
                ((((0x0d) & 0xFFFF)<<16) | ((0x193) & 0xFFFF))
                ((((0x0e) & 0xFFFF)<<16) | ((115) & 0xFFFF))
                ((((0x0f) & 0xFFFF)<<16) | ((114) & 0xFFFF))
                ((((0x11) & 0xFFFF)<<16) | ((102) & 0xFFFF))
                ((((0x1c) & 0xFFFF)<<16) | ((106) & 0xFFFF))
                ((((0x1b) & 0xFFFF)<<16) | ((105) & 0xFFFF))
                ((((0x19) & 0xFFFF)<<16) | ((103) & 0xFFFF))
                ((((0x1a) & 0xFFFF)<<16) | ((108) & 0xFFFF))
                ((((0x1d) & 0xFFFF)<<16) | ((28) & 0xFFFF))
                ((((0x17) & 0xFFFF)<<16) | ((113) & 0xFFFF))
                ((((0x49) & 0xFFFF)<<16) | ((219) & 0xFFFF))
                ((((0x43) & 0xFFFF)<<16) | ((158) & 0xFFFF))
                ((((0x12) & 0xFFFF)<<16) | ((0x1d5) & 0xFFFF))
                ((((0x14) & 0xFFFF)<<16) | ((0x1d6) & 0xFFFF))
                ((((0x18) & 0xFFFF)<<16) | ((0x1d7) & 0xFFFF))
                ((((0x59) & 0xFFFF)<<16) | ((0x166) & 0xFFFF))
                ((((0x5a) & 0xFFFF)<<16) | ((166) & 0xFFFF))
                ((((0x10) & 0xFFFF)<<16) | ((116) & 0xFFFF))
                ((((0x42) & 0xFFFF)<<16) | ((165) & 0xFFFF))
                ((((0x44) & 0xFFFF)<<16) | ((163) & 0xFFFF))
                ((((0x1e) & 0xFFFF)<<16) | ((168) & 0xFFFF))
                ((((0x4b) & 0xFFFF)<<16) | ((208) & 0xFFFF))
                ((((0x58) & 0xFFFF)<<16) | ((164) & 0xFFFF))
                ((((0x46) & 0xFFFF)<<16) | ((130) & 0xFFFF))
                ((((0x40) & 0xFFFF)<<16) | ((131) & 0xFFFF))
                ((((0x38) & 0xFFFF)<<16) | ((70) & 0xFFFF))
                ((((0x57) & 0xFFFF)<<16) | ((0x1d0) & 0xFFFF))
                ((((0x5b) & 0xFFFF)<<16) | ((0x1d1) & 0xFFFF))
                ((((0x54) & 0xFFFF)<<16) | ((0x18e) & 0xFFFF))
                ((((0x4c) & 0xFFFF)<<16) | ((0x18f) & 0xFFFF))
                ((((0x4e) & 0xFFFF)<<16) | ((0x190) & 0xFFFF))
                ((((0x55) & 0xFFFF)<<16) | ((0x191) & 0xFFFF))
                ((((0x53) & 0xFFFF)<<16) | ((237) & 0xFFFF))
                ((((0x52) & 0xFFFF)<<16) | ((238) & 0xFFFF))
                ((((0x39) & 0xFFFF)<<16) | ((212) & 0xFFFF))
                ((((0x41) & 0xFFFF)<<16) | ((213) & 0xFFFF))
                ((((0x0b) & 0xFFFF)<<16) | ((214) & 0xFFFF))
                ((((0x00) & 0xFFFF)<<16) | ((216) & 0xFFFF))
                ((((0x13) & 0xFFFF)<<16) | ((217) & 0xFFFF))>;
        };
        map_2: map_2{
            mapname = "amlogic-remote-3";
            customcode = <0xbd02>;
            release_delay = <80>;
            size = <17>;
            keymap = <((((0xca) & 0xFFFF)<<16) | ((103) & 0xFFFF))
            ((((0xd2) & 0xFFFF)<<16) | ((108) & 0xFFFF))
            ((((0x99) & 0xFFFF)<<16) | ((105) & 0xFFFF))
            ((((0xc1) & 0xFFFF)<<16) | ((106) & 0xFFFF))
            ((((0xce) & 0xFFFF)<<16) | ((97) & 0xFFFF))
            ((((0x45) & 0xFFFF)<<16) | ((116) & 0xFFFF))
            ((((0xc5) & 0xFFFF)<<16) | ((133) & 0xFFFF))
            ((((0x80) & 0xFFFF)<<16) | ((113) & 0xFFFF))
            ((((0xd0) & 0xFFFF)<<16) | ((15) & 0xFFFF))
            ((((0xd6) & 0xFFFF)<<16) | ((125) & 0xFFFF))
            ((((0x95) & 0xFFFF)<<16) | ((102) & 0xFFFF))
            ((((0xdd) & 0xFFFF)<<16) | ((104) & 0xFFFF))
            ((((0x8c) & 0xFFFF)<<16) | ((109) & 0xFFFF))
            ((((0x89) & 0xFFFF)<<16) | ((131) & 0xFFFF))
            ((((0x9c) & 0xFFFF)<<16) | ((130) & 0xFFFF))
            ((((0x9a) & 0xFFFF)<<16) | ((120) & 0xFFFF))
            ((((0xcd) & 0xFFFF)<<16) | ((121) & 0xFFFF))>;
        };
    };

    galcore {
        status = "disabled";
        clocks = <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 11)>,
        <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 10)>;
        /delete-property/ memory-region;
    };

    mesonstream {
        clocks = <&clkc ((33 + 22) + 9)
                    &clkc ((33 + 22) + 2)
                    &clkc ((33 + 22) + 12)
                    &clkc (33 + 1)
                    &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 33)
                    &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 42)
                    &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 51)
                    &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 60)>;
    };

    nand: nfc@0 {
        compatible = "amlogic, aml_mtd_nand";
        dev_name = "mtdnand";
        status = "disabled";
        reg = <0x0 0xFFE07800 0x0 0x200>;
        interrupts = <0 34 1>;
        pinctrl-names = "nand_rb_mod","nand_norb_mod", "nand_cs_only";
        pinctrl-0 = <&all_nand_pins>;
        pinctrl-1 = <&all_nand_pins>;
        pinctrl-2 = <&nand_cs_pins>;
        clocks = <&clkc (33 + 20)>,
            <&clkc (((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 11)>;
        clock-names = "core", "clkin";
        device_id = <0>;
        bl_mode = <1>;
        fip_copies = <4>;
        fip_size = <0x200000>;
        nand_clk_ctrl = <0xFFE07000>;
    };

    ddr_bandwidth {
        /delete-property/ sec_base;
    };
    
    lcd {
        clocks = <&clkc (33 + 3)
                &clkc (33 + 16)
                &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 22)
                &clkc ((((33 + 22) + 13) + 10) + 15)
                &clkc ((((33 + 22) + 13) + 10) + 17)
                &clkc 7>;
    };
}; /* end of / */

&meson_fb {
	status = "okay";
	display_size_default = <1920 1080 1920 2160 32>;
	mem_size = <0x00800000 0x4b80000 0x100000 0x100000 0x800000>;
	logo_addr = "0x3d800000";
	mem_alloc = <1>;
	pxp_mode = <0>; /** 0:normal mode 1:pxp mode */
};

&pwm_ab {
	status = "okay";
};

&pwm_AO_cd {
	status = "okay";
};

&audiobus {
	/* tdmb to internal DAC output*/
    /delete-node/ loopback@0;
    /delete-node/ i2s2hdmi;
	aml_tdmb: tdmb {
		compatible = "amlogic, g12a-snd-tdmb";
		#sound-dai-cells = <0>;
		dai-tdm-lane-slot-mask-in = <0 1 0 0>;
		dai-tdm-lane-slot-mask-out = <1 0 0 0>;
		dai-tdm-clk-sel = <1>;
		clocks = <&clkaudio CLKID_AUDIO_MCLK_B
				&clkc CLKID_MPLL0>;
		clock-names = "mclk", "clk_srcpll";
		pinctrl-names = "tdm_pins";
		pinctrl-0 = <&tdmb_mclk &tdmout_b &tdmin_b>;
		mclk_pad = <0>;  /* 0: mclk_0; 1: mclk_1 */
		i2s2hdmi = <0>;

        /delete-property/ samesource_sel;
	};
	aml_spdif: spdif {
		compatible = "amlogic, g12a-snd-spdif-a";
		#sound-dai-cells = <0>;
		clocks = <&clkc CLKID_MPLL0
				&clkc CLKID_FCLK_DIV4
				&clkaudio CLKID_AUDIO_SPDIFIN
				&clkaudio CLKID_AUDIO_SPDIFOUT
				&clkaudio CLKID_AUDIO_SPDIFIN_CTRL
				&clkaudio CLKID_AUDIO_SPDIFOUT_CTRL>;
		clock-names = "sysclk", "fixed_clk", "gate_spdifin",
				"gate_spdifout", "clk_spdifin", "clk_spdifout";
		interrupts =
				<GIC_SPI 151 IRQ_TYPE_EDGE_RISING>;

		interrupt-names = "irq_spdifin";
		status = "disabled";

        /delete-property/ pinctrl-names;
	};
	aml_spdif_b: spdif_b {
		compatible = "amlogic, g12a-snd-spdif-b";
		#sound-dai-cells = <0>;
		clocks = <&clkc CLKID_MPLL0 /*CLKID_HIFI_PLL*/
				&clkaudio CLKID_AUDIO_SPDIFOUTB
				&clkaudio CLKID_AUDIO_SPDIFOUTB_CTRL>;
		clock-names = "sysclk",
				"gate_spdifout", "clk_spdifout";
		status = "disabled";
	};
	aml_loopback: loopback {
		compatible = "amlogic, snd-loopback";
		/*
		 * 0: out rate = in data rate;
		 * 1: out rate = loopback data rate;
		 */
		lb_mode = <0>;

		/* datain src
		 * 0: tdmin_a;
		 * 1: tdmin_b;
		 * 2: tdmin_c;
		 * 3: spdifin;
		 * 4: pdmin;
		 */
		datain_src = <4>;
		datain_chnum = <8>;
		datain_chmask = <0x3f>;

		/* tdmin_lb src
		 * 0: tdmoutA
		 * 1: tdmoutB
		 * 2: tdmoutC
		 * 3: PAD_tdminA
		 * 4: PAD_tdminB
		 * 5: PAD_tdminC
		 */
		datalb_src = <2>;
		datalb_chnum = <8>;
		datalb_chmask = <0x3>;

		status = "disabled";
	};

	audioresample: resample {
		compatible = "amlogic, g12a-resample";
		clocks = <&clkc CLKID_MPLL3
				&clkaudio CLKID_AUDIO_MCLK_F
				&clkaudio CLKID_AUDIO_RESAMPLE_CTRL>;
		clock-names = "resample_pll", "resample_src", "resample_clk";
		/*same with toddr_src
		 *	TDMIN_A, 0
		 *	TDMIN_B, 1
		 *	TDMIN_C, 2
		 *	SPDIFIN, 3
		 *	PDMIN,  4
		 *	NONE,
		 *	TDMIN_LB, 6
		 *	LOOPBACK, 7
		 */
		resample_module = <4>;
		status = "disabled";
	};
	aml_pwrdet: pwrdet {
		compatible = "amlogic, g12a-power-detect";

		interrupts = <GIC_SPI 155 IRQ_TYPE_EDGE_RISING>;
		interrupt-names = "pwrdet_irq";

		/* pwrdet source sel
		 * 7: loopback;
		 * 6: tdmin_lb;
		 * 5: reserved;
		 * 4: pdmin;
		 * 3: spdifin;
		 * 2: tdmin_c;
		 * 1: tdmin_b;
		 * 0: tdmin_a;
		 */
		pwrdet_src = <4>;

		hi_th = <0x70000>;
		lo_th = <0x16000>;

		status = "disabled";
	};
}; /* end of audiobus */

&pinctrl_periphs {
	tdmb_mclk: tdmb_mclk {
		mux { /* GPIOA_0 */
			groups = "mclk0_a";
			function = "mclk0";
			drive-strength = <2>;
		};
	};
	tdmout_b: tdmout_b {
		mux { /* GPIOA_1, GPIOA_2, GPIOA_3 */
			groups = "tdmb_sclk",
				"tdmb_fs",
				"tdmb_dout0";
			function = "tdmb_out";
			drive-strength = <2>;
		};
	};
	tdmin_b:tdmin_b {
		mux { /* GPIOA_4 */
			groups = "tdmb_din1";
			function = "tdmb_in";
			drive-strength = <2>;
		};
	};

	bl_pwm_off_pins:bl_pwm_off_pin {
		mux {
			pins = "GPIOH_5";
			function = "gpio_periphs";
			output-high;
		};
	};

	clk12_24_z_pins:clk12_24_z_pins {
		mux {
			groups = "clk12_24_z";
			function = "clk12_24_ee";
			drive-strength = <3>;
		};
	};

    spifc_all_pins: spifc_all_pins {
        mux {
            groups = "nor_d",
                "nor_q",
                "nor_c";
            function = "nor";
            input-enable;
            bias-pull-up;
        };
    };
}; /* end of pinctrl_periphs */

&a_uart_pins {
    mux {
        groups = "uart_tx_a",
            "uart_rx_a",
            "uart_rts_a";
    };
    mux1 {
        groups = "uart_cts_a";
        function = "uart_a";
        bias-pull-down;
    };
};

&audio_data {
	status = "okay";
};

&sd_emmc_c {
	status = "okay";
	mmc-ddr-1_8v;
	mmc-hs200-1_8v;
	vmmc-supply = <&vcc_sd>;
	vqmmc-supply = <&vddio_ao1v8>;
    clocks = <&clkc (33 + 20)>,
            <&clkc (((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 11)>,
            <&clkc 2>,
            <&clkc 32>,
            <&xtal>;
	emmc {
        /delete-property/ save_para;
		/delete-property/ compute_cmd_delay;
		/delete-property/ compute_coef;
		caps = "MMC_CAP_8_BIT_DATA",
			 "MMC_CAP_MMC_HIGHSPEED",
			 "MMC_CAP_SD_HIGHSPEED",
			 "MMC_CAP_NONREMOVABLE",
			 "MMC_CAP_HW_RESET",
			 "MMC_CAP_ERASE",
			 "MMC_CAP_CMD23";
		caps2 = "MMC_CAP2_HS200_1_8V_SDR",
			"MMC_CAP2_BROKEN_VOLTAGE";
		f_min = <400000>;
		f_max = <200000000>;
		hw_reset = <&gpio BOOT_12 GPIO_ACTIVE_HIGH>;
	};
};

&sd_emmc_b {
	status = "okay";
	sd-uhs-sdr25;
	sd-uhs-sdr50;
	sd-uhs-sdr104;
	max-frequency = <200000000>;
	vmmc-supply = <&vcc_sd>;
	vqmmc-supply = <&vddio_c>;
    clocks = <&clkc (33 + 19)>,
            <&clkc (((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 7)>,
            <&clkc 2>,
            <&clkc 5>,
            <&xtal>;
	sd {
		caps = "MMC_CAP_4_BIT_DATA",
			 "MMC_CAP_MMC_HIGHSPEED",
			 "MMC_CAP_SD_HIGHSPEED",
			 "MMC_CAP_UHS_SDR25",
			 "MMC_CAP_UHS_SDR50",
			 "MMC_CAP_UHS_SDR104",
			 "MMC_CAP_ERASE",
			 "MMC_CAP_CMD23";
		f_min = <400000>;
		f_max = <200000000>;
        jtag_pin = <&gpio 42 0>;
	};
};

&sd_emmc_a {
    status = "disabled";
    clocks = <&clkc (33 + 18)>,
            <&clkc (((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 3)>,
            <&clkc 2>,
            <&clkc 5>,
            <&xtal>;
    sdio {
        /delete-property/ caps;
        /delete-property/ f_min;
        /delete-property/ f_max;
    };
};

&gpu {
    min_clk = <4>;
    clocks = <&clkc ((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 8) &clkc 7>;
};

&dvfs285_cfg {
   threshold = <100 190>;
};

&dvfs500_cfg {
   threshold = <180 220>;
};

&dvfs666_cfg {
   threshold = <210 236>;
};

&dvfs850_cfg {
   threshold = <230 255>;
};

&CPU0 {
    clocks =    <&clkc 23>,
                <&clkc 22>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 17)>;
};

&CPU1 {
    clocks =    <&clkc 23>,
                <&clkc 22>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 17)>;
};

&CPU2 {
    clocks =    <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 1)>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 0)>,
                <&clkc 0>;
};

&CPU3{
    clocks =    <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 1)>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 0)>,
                <&clkc 0>;
};

&CPU4 {
    clocks =    <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 1)>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 0)>,
                <&clkc 0>;
};

&CPU5 {
    clocks =    <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 1)>,
                <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 0)>,
                <&clkc 0>;
};

&ethmac {
    status = "disabled";
    clocks = <&clkc ((33 + 22) + 1)>;
    /delete-property/ mc_val;
    /delete-property/ internal_phy;
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
};

&external_eth_pins {
    mux {
        groups = "eth_mdio",
        "eth_mdc",
        "eth_rgmii_rx_clk",
        "eth_rx_dv",
        "eth_rxd0",
        "eth_rxd1",
        "eth_rxd2_rgmii",
        "eth_rxd3_rgmii",
        "eth_rgmii_tx_clk",
        "eth_txen",
        "eth_txd0",
        "eth_txd1",
        "eth_txd2_rgmii",
        "eth_txd3_rgmii";
    };
};

&pinctrl_aobus {
    /delete-node/ spdifout;
    /delete-node/ spdifout_a_mute;
};

&aml_spdif {
    /delete-property/ pinctrl-0;
    /delete-property/ pinctrl-1;
};

&usb2_phy_v2 {
	status = "okay";
	portnum = <2>;
};

&dwc3 {
	status = "okay";
    clocks = <&clkc ((33 + 22) + 10)>;
};

&dwc2_a {
	status = "okay";
	/** 0: normal, 1: otg+dwc3 host only, 2: otg+dwc3 device only*/
	controller-type = <3>;
    clocks = <&clkc ((33 + 22) + 10)
                &clkc (((33 + 22) + 13) + 5)>;
};

&pcie_A {
	reset-gpio = <&gpio GPIOX_7 GPIO_ACTIVE_HIGH>;
	status = "disabled";
    clocks = <&clkc 24
            &clkc ((33 + 22) + 8)
            &clkc ((33 + 22) + 11)>;
    clock-names = "pcie_refpll",
                "pcie",
                "pcie_phy";
};

&usb3_phy_v2 {
	status = "okay";
	portnum = <1>;
	otg = <1>;
    /delete-property/ gpio-vbus-power;
    /delete-property/ gpios;
};

&saradc {
	status = "okay";
    clocks = <&xtal>, <&clkc (((((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 18) + 19) + 3)>;
};

&p_tsensor {
    clocks = <&clkc ((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 8)>;
};

&d_tsensor {
    clocks = <&clkc ((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 8)>;
};

&i2c0 {
    clocks = <&clkc (33 + 9)>;
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
	/delete-property/ clock-frequency;
};

&i2c1 {
    clocks = <&clkc (33 + 9)>;
};

&i2c2 {
    clocks = <&clkc (33 + 9)>;
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
	/delete-property/ clock-frequency;
};

&i2c3 {
    clocks = <&clkc (33 + 9)>;
};

&isp {
	status = "disabled";
    temper-buf-size = <24>;
    clocks = <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 13)>,
            <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 14)>;
    
    /delete-property/ temper-line-offset;
	/delete-property/ temper-frame-num;
	/delete-property/ temper-frame-size;
	/delete-property/ memory-region;
};

&adapter {
	status = "disabled";
    mem_alloc = <48>;
    /delete-property/ memory-region;
};

&amhdmitx {
	status = "disabled";
    clocks = <&clkc ((((33 + 22) + 13) + 10) + 7)
            &clkc ((((33 + 22) + 13) + 10) + 0)
            &clkc ((((33 + 22) + 13) + 10) + 1)
            &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 17)
            &clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 8)>;
    interrupts = <0 57 1>;
    interrupt-names = "hdmitx_hpd";
};

&aocec {
	status = "disabled";
    compatible = "amlogic, aocec-g12a";
    ee_cec;
    arc_port_mask = <0x02>;
    /delete-property/ output;
};

&spicc0 {
    clocks = <&clkc (33 + 8)>,
      <&clkc ((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 3)>;
};

&spicc1 {
    clocks = <&clkc (33 + 14)>,
      <&clkc ((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 7)>;
};

&cbus {
    spifc: spifc@14000 {
        status = "disabled";
        compatible = "amlogic,aml-spi-nor";
        reg = <0x0 0x14000 0x0 0x80>;
        pinctrl-names = "default";
        pinctrl-0 = <&spifc_all_pins>;
        clocks = <&clkc 11>;
        clock-names = "core";
   };
};

&i2c_AO {
    clocks = <&clkc (33 + 9)>;
};

&uart_A {
    status = "disabled";
    clocks = <&xtal
            &clkc (33 + 13)>;
};

&uart_B {
    clocks = <&xtal
            &clkc ((33 + 22) + 5)>;
};

&uart_C {
    clocks = <&xtal
            &clkc ((33 + 22) + 5)>;
};

&vdin0 {
    /delete-property/ cma_size;
    /delete-property/ tv_bit_mode;
};

&vdin1 {
    /delete-property/ memory-region;
    /delete-property/ tv_bit_mode;
};

&gdc {
    clocks = <&clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 8)
            &clkc (((((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 74) + 15) + 9) >;
};

&meson_fb {
    /delete-property/ 4k2k_fb;
    clocks = <&clkc (((((((((33 + 22) + 13) + 10) + 19) + 1) + 5) + 20) + 9) + 69)>;
};

&meson_cooldev {
    cooling_devices {
        cpufreq_cool_cluster0 {
            gpu_pp = <2>;
        };
        cpufreq_cool_cluster1 {
            gpu_pp = <2>;
        };
        cpucore_cool_cluster {
            dyn_coeff = <0>;
            gpu_pp = <2>;
        };
        gpufreq_cool {
            cluster_id = <0>;
        };
        gpucore_cool {
            dyn_coeff = <0>;
            cluster_id = <0>;
            gpu_pp = <2>;
        };
    };
};

&pswitch_on {
    temperature = <65000>;
};

&phot {
    temperature = <95000>;
};

&soc_thermal {
    cooling-maps {
        /delete-node/ cpucore_cooling_map0;
        cpufreq_cooling_map0 {
            cooling-device = <&cpufreq_cool0 0 10>;
        };
        cpufreq_cooling_map1 {
            cooling-device = <&cpufreq_cool1 0 9>;
        };
        cpucore_cooling_map {
            trip = <&pcontrol>;
            cooling-device = <&cpucore_cool 0 5>;
            contribution = <1024>;
        };
        gpufreq_cooling_map {
            cooling-device = <&gpufreq_cool0 0 4>;
        };
        gpucore_cooling_map {
            cooling-device = <&gpucore_cool0 0 2>;
        };
    };
};